<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/vaadin-grid/all-imports.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<dom-module id="ryr-suggestion-list">
  <template>
    <!-- TODO(rÃ©myg): Find a way to provide the URL via environment variables -->
    <iron-ajax
    auto
    url="http://localhost:18000/places/"
    handle-as="json"
    last-response="{{response}}"
    jsonPrefix="results"></iron-ajax>
    <!-- <vaadin-grid id="grid" active-item="{{activeItem}}" items='[{"name":"100-214 W N Loop Blvd","place_id":"ChIJScAAmmvKRIYRn42comEgS20"}, {"name":"Epoch Coffee - NorthLoop","place_id":"ChIJG-gJw2vKRIYROWi2uwOp8QE"}, {"name":"Blue Velvet","place_id":"ChIJBzPI6WvKRIYRO059hPJZndU"}, {"name":"Breakaway Records","place_id":"ChIJl97swWvKRIYR04M3oxYPG-Y"}, {"name":"The Center Spot","place_id":"ChIJb-iQwWvKRIYREcuAEGb-Brw"}, {"name":"Waller Creek","place_id":"ChIJzSjl3GvKRIYRk3hfNfLuAL4"}, {"name":"Austin","place_id":"ChIJLwPMoJm1RIYRetVp1EtGm10"}]'> -->
    <vaadin-grid id="grid" active-item="{{activeItem}}" items="[[response.results]]" size="10">
      <vaadin-grid-column width="50px" flex-grow="0">
        <template class="header">#</template>
  <template>[[index]]</template>
  </vaadin-grid-column>
  <vaadin-grid-column>
    <template class="header">Name</template>
    <template>[[item.name]]</template>
  </vaadin-grid-column>
  <vaadin-grid-column>
    <template class="header">Place ID</template>
    <template>[[item.place_id]]</template>
  </vaadin-grid-column>
  </vaadin-grid>
  </template>
  <!-- Web component class. -->
  <script>
    /**
     * `ryr-suggestion-list`
     * Request a rack
     *
     * @customElement
     * @polymer
     * @demo demo/index.html
     */
    class RyrSuggestionList extends Polymer.Element {
      static get is() {
        return 'ryr-suggestion-list';
      }

      static get properties() {
        return {
          activeItem: {
            observer: '_activeItemChanged'
          }
        };
      }

      _activeItemChanged(item) {
        this.$.grid.selectedItems = item ? [item] : [];
      }

    }

    window.customElements.define(RyrSuggestionList.is, RyrSuggestionList);
  </script>
</dom-module>
